<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Glosarium</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { cursor: pointer; background: #f2f2f2; }
    input { width: 300px; padding: 5px; margin-bottom: 10px; }
  </style>
</head>
<body>
  <h1>Glosarium</h1>
  <input type="text" id="searchInput" placeholder="Cari istilah...">
  <table id="glossaryTable">
    <thead>
      <tr>
        <th onclick="sortTable(0)">Istilah/Frasa (Bahasa Indonesia) ⬍</th>
        <th onclick="sortTable(1)">Padanan Formal dalam Bahasa Inggris ⬍</th>
        <th onclick="sortTable(2)">Tanggal Unggah ⬍</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTIDIKfUwmik4T5jZdnHVtD-9y4e7k68d_qp-aHCw9Y8PwgGWejyz8zzRvS3WHHlzSo9tof69ZJK_lN/pub?output=csv"; // Ganti dengan URL CSV dari Google Sheets

    fetch(sheetUrl)
      .then(res => res.text())
      .then(csvText => {
        const rows = csvText.split("\n").map(r => r.split(","));
        const tbody = document.querySelector("#glossaryTable tbody");
        rows.slice(1).forEach(row => {
          if(row.length >= 3){
            const tr = document.createElement("tr");
            tr.innerHTML = `<td>${row[0]}</td><td>${row[1]}</td><td>${row[2]}</td>`;
            tbody.appendChild(tr);
          }
        });
      });

    // Fitur Pencarian
    document.getElementById("searchInput").addEventListener("keyup", function() {
      const filter = this.value.toLowerCase();
      const trs = document.querySelectorAll("#glossaryTable tbody tr");
      trs.forEach(tr => {
        const text = tr.textContent.toLowerCase();
        tr.style.display = text.includes(filter) ? "" : "none";
      });
    });

    // Fitur Sortir
    function sortTable(n) {
      const table = document.getElementById("glossaryTable");
      let switching = true, dir = "asc", switchcount = 0;
      while (switching) {
        switching = false;
        let rows = table.rows;
        for (let i = 1; i < rows.length - 1; i++) {
          let shouldSwitch = false;
          let x = rows[i].getElementsByTagName("TD")[n];
          let y = rows[i + 1].getElementsByTagName("TD")[n];
          if (dir === "asc" && x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
            shouldSwitch = true; break;
          }
          if (dir === "desc" && x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
            shouldSwitch = true; break;
          }
        if (shouldSwitch) {
          rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
          switching = true;
          switchcount++;
        } else {
          if (switchcount === 0 && dir === "asc") { dir = "desc"; switching = true; }
        }
        }
      }
    }
  </script>
</body>
</html>
